@model MKTS.Controllers.DashboardData
@{
    ViewData["Title"] = "Dashboard 1";

}
@*@section Styles {*@
<!-- Morris charts -->
<link rel="stylesheet" href="~/lib/morris.js/morris.css" />
<style>
    .MainDiv {
        position: relative;
        text-align: center;
        color: white;
    }

    .AjkStyle {
        position: absolute;
        top: 39.5%;
        right: 4%;
    }

    .BaloStyle {
        position: absolute;
        top: 26.8%;
        left: 2%;
    }

    .GBStyle {
        position: absolute;
        top: 6.2%;
        left: 32%;
    }

    .ICTStyle {
        position: absolute;
        top: 53.5%;
        right: 20%;
    }

    .KPKStyle {
        position: absolute;
        top: 14%;
        left: 8%;
    }

    .PunjabStyle {
        position: absolute;
        top: 63.8%;
        right: 29%;
    }

    .SindhStyle {
        position: absolute;
        top: 73.6%;
        right: 39%;
    }
</style>
<style>
    .bg-Mtks-Pink {
        background-color: #EF6099 !important;
        color: #fff;
    }

    .bg-Mtks-Light-blue {
        background-color: #00ABEB !important;
        color: #fff;
    }

    .bg-Mtks-blue {
        background-color: #202daf !important;
        color: #fff;
    }

    .bg-Mtks-yellow {
        background-color: #ffc216 !important;
        color: #fff;
    }

    .bg-green-gradient {
        background: #00a65a !important;
        color: #fff;
    }

    h2.cen,
    h3.cen,
    .cen {
        font-family: Century Gothic;
    }
</style>
@*}*@
@section Scripts {
    <!-- Morris.js charts -->
    <script src="~/lib/raphael/raphael.min.js"></script>
    <script src="~/lib/morris.js/morris.min.js"></script>
    @*<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.bundle.min.js"></script></script>*@

    <script src="~/lib/ChartJs/Chart.min.js"></script>
    <!-- page script -->
    <script>
        $(function () {
            var dd= @Html.Raw(Json.Serialize(Model));
            /* ChartJS
             * -------
             * Here we will create a few charts using ChartJS
             */

            //--------------
            //- Teacher Trained -
            //--------------

            new Chart(document.getElementById("polar-chart"), {
                type: 'horizontalBar',
            data: {

               // labels: ["AJK", "Balochi", "GB", "ICT", "KP", "Punjab", "Sindh"],
                labels: @Html.Raw(Json.Serialize(Model.TrainingType)),

                datasets: [
                    {
                        label: "Male Teachers",
                        backgroundColor: 'rgba(102,64,58,1)',
                        data: @Html.Raw(Json.Serialize(Model.TrainingMale)),
                        //data: [3666, 3223, 3002, 5193, 2924, 4946, 3504]
                    },
                    {
                        label: "Female Teachers",
                        backgroundColor: 'rgba(215, 26, 50, 1)',
                        //data: [3666, 3223, 3002, 5193, 2924, 4946, 3504]
                        data:@Html.Raw(Json.Serialize(Model.TrainingFemale)) ,
                    }
                ]
            },
            options: {

                tooltips: {
                    mode: 'index',
                    intersect: false,
                    callbacks: {
                        afterTitle: function () {
                            window.total = 0;
                        },
                        label: function (tooltipItem, data) {
                            var corporation = data.datasets[tooltipItem.datasetIndex].label;
                            var valor = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];
                            window.total += valor;
                            return corporation + ": " + valor.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
                        },
                        footer: function () {
                            return "TOTAL: " + window.total.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
                        }
                    }
                },
                //legend: { display: false },
                title: {
                    //display: true,
                    //text: 'Predicted world population (millions) in 2050'
                },
                // },
                onComplete: function () {

                    var ctx = this.chart.ctx;
                    ctx.font = this.scale.font;
                    ctx.fillStyle = this.scale.textColor
                    ctx.textAlign = "center";
                    ctx.textBaseline = "bottom";

                    this.datasets.forEach(function (dataset) {
                        dataset.points.forEach(function (points) {
                            ctx.fillText(points.value, points.x, points.y - 10);
                        });
                    })
                }

            }

        });


            //-------------
            //- DONUT CHART -
            //--------------
            new Chart(document.getElementById("doughnut-chart"), {
                type: 'pie',
                data: {
                    labels: ["Students Retained", "Students Dropout"],
                    datasets: [
                        {
                            label: "Population (millions)",
                            backgroundColor: ['rgba(250,164,26)', 'rgba(222, 217, 201)'],
                            data: @Html.Raw(Json.Serialize(Model.retention))
                        }
                    ]
                },
                options: {
                    //title: {
                    //    display: true,
                    //    fontsize: 14,
                    //    text: 'Total de Pedidos por Situação'
                    //},
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            generateLabels: function (chart) {
                                var data = chart.data;
                                if (data.labels.length && data.datasets.length) {
                                    return data.labels.map(function (label, i) {
                                        var meta = chart.getDatasetMeta(0);
                                        var ds = data.datasets[0];
                                        var arc = meta.data[i];
                                        var custom = arc && arc.custom || {};
                                        var getValueAtIndexOrDefault = Chart.helpers.getValueAtIndexOrDefault;
                                        var arcOpts = chart.options.elements.arc;
                                        var fill = custom.backgroundColor ? custom.backgroundColor : getValueAtIndexOrDefault(ds.backgroundColor, i, arcOpts.backgroundColor);
                                        var stroke = custom.borderColor ? custom.borderColor : getValueAtIndexOrDefault(ds.borderColor, i, arcOpts.borderColor);
                                        var bw = custom.borderWidth ? custom.borderWidth : getValueAtIndexOrDefault(ds.borderWidth, i, arcOpts.borderWidth);

                                        // We get the value of the current label
                                        var value = chart.config.data.datasets[arc._datasetIndex].data[arc._index];

                                        return {
                                            // Instead of `text: label,`
                                            // We add the value to the string
                                            text: label + " : " + value +"%",
                                            fillStyle: fill,
                                            strokeStyle: stroke,
                                            lineWidth: bw,
                                            hidden: isNaN(ds.data[i]) || meta.data[i].hidden,
                                            index: i
                                        };
                                    });
                                } else {
                                    return [];
                                }
                            }
                        }
                    }
                }
            });

            //-------------
            //- RADAR CHART -
            //-------------
            // Get context with jQuery - using jQuery's .get() method.
            //new Chart(document.getElementById("doughnut-chart"), {
            //    type: 'radar',
            //    data: {
            //        labels: ["Washroom Repair", "Construction of Wall", "Construction of Washroom", "Installation of Handpump", "Refurbishment of School", "Installation of Solar Panel", "Repair of School Gate", "Installation of Filtration Plant", "White Wash", "Electric Repairments", "Flooring"],
            //        datasets: [
            //            {
            //                label: "Primay",
            //                fill: true,
            //                backgroundColor: "rgba(179,181,198,0.2)",
            //                borderColor: "rgba(179,181,198,1)",
            //                pointBorderColor: "#fff",
            //                pointBackgroundColor: "rgba(179,181,198,1)",
            //                data: [25, 46, 43, 37, 10, 33, 31, 14, 32, 50, 12]
            //            }, {
            //                label: "Middle",
            //                fill: true,
            //                backgroundColor: "rgba(255,99,132,0.2)",
            //                borderColor: "rgba(255,99,132,1)",
            //                pointBorderColor: "#fff",
            //                pointBackgroundColor: "rgba(255,99,132,1)",
            //                pointBorderColor: "#fff",
            //                data: [10, 16, 41, 38, 48, 26, 13, 48, 26, 19, 26]
            //            }, {
            //                label: "High",
            //                fill: true,
            //                backgroundColor: "rgba(75, 192, 192,0.2)",
            //                borderColor: "rgba(75, 192, 192,1)",
            //                pointBorderColor: "rgba(75, 192, 192,1)",
            //                pointBackgroundColor: "rgba(255,99,132,1)",
            //                pointBorderColor: "rgba(75, 192, 192,1)",
            //                data: [43, 49, 23, 22, 21, 27, 43, 46, 44, 10, 33]
            //            }
            //        ]
            //    },
            //    options: {
            //        title: {
            //            // display: true,
            //            text: 'Distribution in % of world population'
            //        }
            //    }
            //});

            //-------------
            //- BAR CHART -
            //-------------
           // var PEnroll =@Html.Raw(Json.Serialize( Model.Enrollment));
            new Chart(document.getElementById("bar-chart"), {
                type: 'bar',
                data: {
                    //labels: @Html.Raw(Json.Serialize(Model.Province)),
                    labels: ["Washroom Repair", "Construction of Wall", "Construction of Washroom", "Installation of Handpump", "Refurbishment of School", "Installation of Solar Panel", "Repair of School Gate"],
                    datasets: [
                        {
                            label: "Enrollment",
                            backgroundColor: ['rgba(255, 99, 132, 1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 75, 192, 1)',
                                'rgba(153, 102, 255, 1)',
                                'rgba(5, 159, 64, 1)',
                                'rgba(355, 99, 232, 1)'],
                            borderColor: [
                                'rgba(255,99,132,1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 75, 192, 1)',
                                'rgba(153, 102, 255, 1)',
                                'rgba(5, 159, 64, 1)',
                                'rgba(355, 99, 232, 0.5,1)'],
                            borderWidth: 1,
                            data: @Html.Raw(Json.Serialize(Model.InfraVal)),
                            //data: [3666, 3223, 3002, 5193, 2924, 4946, 3504]
                        }
                    ]
                },
                options: {
                    legend: { display: false },
                    title: {
                        //display: true,
                        //text: 'Predicted world population (millions) in 2050'
                    },
                    // },
                    onComplete: function () {

                        var ctx = this.chart.ctx;
                        ctx.font = this.scale.font;
                        ctx.fillStyle = this.scale.textColor
                        ctx.textAlign = "center";
                        ctx.textBaseline = "bottom";

                        this.datasets.forEach(function (dataset) {
                            dataset.points.forEach(function (points) {
                                ctx.fillText(points.value, points.x, points.y - 10);
                            });
                        })
                    }

                }

            });

            //-------------
            //- Line Chart -
            //-------------
            //new Chart(document.getElementById("line-chart"), {
            //    type: 'line',
            //    data: {
            //        labels: ["Plastic Mat", " Water Cooler", "Black Board", "Teacher Chair", "Attendance Registar", "Water Tank", "	Desk", "Cupboard/Rack", "Electric Cooler"],
            //        datasets: [{
            //            data: [41, 31, 39, 31, 34, 35, 32, 36, 30],
            //            label: "AJK",
            //            borderColor: "#3e95cd",
            //            fill: false
            //        }, {
            //            data: [43, 49, 36, 49, 48, 49, 41, 44, 32],
            //            label: "Baluchistan",
            //            borderColor: "#8e5ea2",
            //            fill: false
            //        }, {
            //            data: [21, 28, 20, 17, 31, 27, 31, 29, 28],
            //            label: "GB",
            //            borderColor: "#3cba9f",
            //            fill: false
            //        }, {
            //            data: [49, 40, 44, 48, 41, 48, 46, 40, 43],
            //            label: "ICT",
            //            borderColor: "#e8c3b9",
            //            fill: false
            //        }, {
            //            data: [31, 30, 32, 39, 35, 36, 32, 32, 36],
            //            label: "KP",
            //            borderColor: "#c45850",
            //            fill: false
            //        }, {
            //            data: [30, 28, 22, 28, 27, 22, 25, 29, 23],
            //            label: "Punjab",
            //            borderColor: "#845850",
            //            fill: false
            //        }, {
            //            data: [19, 22, 15, 22, 36, 30, 18, 50, 46],
            //            label: "Sindh",
            //            borderColor: "#245850",
            //            fill: false
            //        }
            //        ]
            //    },
            //    options: {
            //        title: {
            //            // display: true,
            //            //  text: 'World population per region (in millions)'
            //        }
            //    }
            //});
        })</script>
}
<!-- Content Header (Page header) -->
<section class="content-header">
    <h1 class="cen">
        Dashboard
        <small>Control panel</small>
    </h1>
    @*<ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
            <li class="active">Dashboard</li>
        </ol>*@
</section>
<!-- Main content -->
<section class="content">

    <!-- Small boxes (Stat box) -->
    <div class="row">
        <div class="col-lg-5">
            <div class="row">
                <div class="col-lg-6 col-xs-6">
                    <!-- small box -->
                    <div class="small-box bg-Mtks-Pink">
                        <div class="inner">
                            <h3 class="cen">
                                @String.Format("{0:#,##}", @Model.TotalEnroll)
                            </h3>
                            <p> Out of School Girls and Boys Enrolled </p> <br />
                        </div>

                        <div class="icon">
                            <i class="ion ion-bag"></i>
                        </div>
                        <a asp-controller="Dashboards" asp-action="Enrollment" class="small-box-footer">More info<i class="fa fa-arrow-circle-right"></i></a>
                    </div>
                </div>
                <!-- ./col -->
                <div class="col-lg-6 col-xs-6">
                    <!-- small box -->
                    <div class="small-box bg-Mtks-Light-blue">
                        <div class="inner">
                            <h3 class="cen">@Model.retention[0]<sup style="font-size: 20px">%</sup></h3>
                            <p> Percentage of Girls and Boys Retained in the system </p>
                        </div>
                        <div class="icon">
                            <i class="ion ion-stats-bars"></i>
                        </div>
                        <a asp-controller="Retention" asp-action="Index" class="small-box-footer">More info<i class="fa fa-arrow-circle-right"></i></a>
                    </div>
                </div>
                <!-- ./col -->
            </div>
        </div>
        <div class="col-md-7">
            <div class="row">
                <div class="col-lg-4 col-xs-6">
                    <!-- small box -->
                    <div class="small-box bg-Mtks-blue">
                        <div class="inner">
                            <h3 class="cen">@Model.SupplySchools</h3>
                            <p>Formal and Non-Formal Schools Provided Supplies</p>
                        </div>
                        <div class="icon">
                            <i class="ion ion-person-add"></i>
                        </div>
                        <a asp-controller="Supply" asp-action="Index" class="small-box-footer">More info<i class="fa fa-arrow-circle-right"></i></a>
                    </div>
                </div>
                <!-- ./col -->
                <div class="col-lg-4 col-xs-6">
                    <!-- small box -->
                    <div class="small-box bg-green-gradient">
                        <div class="inner">
                            <h3 class="cen">@Model.InfraSchools</h3>
                            <p>School Supported for Improved Infrastructure</p>
                        </div>
                        <div class="icon">
                            <i class="ion ion-person-add"></i>
                        </div>
                        <a asp-controller="Supply" asp-action="Index" class="small-box-footer">More info<i class="fa fa-arrow-circle-right"></i></a>
                    </div>
                </div>
                <!-- ./col -->
                <div class="col-lg-4 col-xs-6">
                    <!-- small box -->
                    <div class="small-box bg-Mtks-yellow">
                        <div class="inner">
                            <h3 class="cen">@(Model.TrainingMale.Sum() + Model.TrainingFemale.Sum() )</h3>
                            <p>Formal and Non-Formal School Teachers Trained </p>
                        </div>
                        <div class="icon">
                            <i class="ion ion-pie-graph"></i>
                        </div>
                        <a asp-controller="Training" asp-action="Index" class="small-box-footer">More info<i class="fa fa-arrow-circle-right"></i></a>
                    </div>
                </div>
                <!-- ./col -->
            </div>
        </div>
    </div>
    <!-- /.row -->
    <!-- Main row -->
    <div class="row">
        <div class="col-md-12">
            <div class="box box-success center">
                <div class="box-header with-border">
                    <h3 class="box-title cen">Provincial Summary of Enrollment</h3>
                    <div class="box-tools pull-right">
                        @*<button type="button" class="btn btn-box-tool" data-widget="collapse">
                            <i class="fa fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>*@
                    </div>
                </div>
                <div class="box-body MainDiv">
                    <img src="~/img/EnrollMapDistricts.jpg" width="100%" />
                    <div class="AjkStyle"><h5 class="cen">@String.Format("{0:#,##}", @Model.Enrollment[0])</h5></div>
                    <div class="BaloStyle "><h5 class="cen">@String.Format("{0:#,##}", @Model.Enrollment[1])</h5></div>
                    <div class="GBStyle"><h5 class="cen">@String.Format("{0:#,##}", @Model.Enrollment[2])</h5></div>
                    <div class="ICTStyle "><h5 class="cen">@String.Format("{0:#,##}", @Model.Enrollment[3])</h5></div>
                    <div class="KPKStyle"><h5 class="cen">@String.Format("{0:#,##}", @Model.Enrollment[4])</h5></div>
                    <div class="PunjabStyle"><h5 class="cen">@String.Format("{0:#,##}", @Model.Enrollment[5])</h5></div>
                    <div class="SindhStyle"><h5 class="cen">@String.Format("{0:#,##}", @Model.Enrollment[6])</h5></div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <!-- DONUT CHART -->
            <div class="box box-info">
                <div class="box-header with-border">
                    <h3 class="box-title cen">Overall Retention Rate</h3>
                    <div class="box-tools pull-right">
                        @*<button type="button" class="btn btn-box-tool" data-widget="collapse">
                            <i class="fa fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>*@
                    </div>
                </div>
                <div class="box-body">
                    <div class="chart">
                        <canvas id="doughnut-chart" width="800" height="490"></canvas>

                    </div>
                </div>
                <!-- /.box-body -->
            </div>
            <!-- /.box -->
            <!-- POLAR CHART -->
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title cen">Teachers’ Trained</h3>
                    <div class="box-tools pull-right">
                        @*<button type="button" class="btn btn-box-tool" data-widget="collapse">
                            <i class="fa fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>*@
                    </div>
                </div>
                <div class="box-body">
                    <div class="chart">
                        <canvas id="polar-chart" width="800" height="330"></canvas>
                    </div>
                </div>
                <!-- /.box-body -->
            </div>
            <!-- /.box -->
        </div>

        <!-- /.col (LEFT) -->

        <div class="col-md-6">
            <!-- BAR CHART -->
            <div class="box box-success">
                <div class="box-header with-border">
                    <h3 class="box-title cen">Infrastructure Developed in Schools</h3>
                    <div class="box-tools pull-right">
                        @*<button type="button" class="btn btn-box-tool" data-widget="collapse">
                            <i class="fa fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>*@
                    </div>
                </div>
                <div class="box-body">
                    <table>
                        <tr>
                            <td style="width:70px">
                                <img src="~/img/Supplies/Washroom Repair icon-2.png" width="60" />
                            </td>
                            <td style="width:170px"><small>Washroom Repairs</small> <br /><b> @Model.InfraVal[0]</b></td>

                            <td style="width:70px">
                                <img src="~/img/Supplies/Wall Contruction icon-2.png" width="60" />
                            </td>
                            <td style="width:170px"><small>Construction Wall</small> <br /> <b> @Model.InfraVal[1]</b></td>

                        </tr>

                        <tr>
                            <td style="width:70px">
                                <img src="~/img/Supplies/Washroom Construction icon-2.png" width="60" />
                            </td>
                            <td style="width:170px"><small>Washroom Construction</small> <br /> <b> @Model.InfraVal[2]</b></td>

                            <td style="width:70px">
                                <img src="~/img/Supplies/Hand Pump icon-2.png" width="60" />
                            </td>
                            <td style="width:170px"><small>Hand Pump Installation</small> <br /><b> @Model.InfraVal[3]</b></td>

                        </tr>

                        <tr>
                            <td style="width:70px">
                                <img src="~/img/Supplies/Refurbishment of Class.png" width="60" />
                            </td>
                            <td style="width:170px"><small>Refurbishment of School</small> <br /><b> @Model.InfraVal[4]</b></td>

                            <td style="width:70px">
                                <img src="~/img/Supplies/Solar Penal icon-2.png" width="60" />
                            </td>
                            <td style="width:170px"><small>Installation of Solar Panel</small> <br /><b> @Model.InfraVal[5]</b></td>

                        </tr>

                        <tr>
                            <td style="width:70px">
                                <img src="~/img/Supplies/Filtration Plant icon-2.png" width="60" />
                            </td>
                            <td style="width:170px"><small>Filtration Plant installation</small> <br /> <b> @Model.InfraVal[6]</b></td>

                            <td style="width:70px">
                                <img src="~/img/Supplies/Contruction Wall icon-2.png" width="60" />
                            </td>
                            <td style="width:170px"><small>White Wash</small> <br /> <b> @Model.InfraVal[7]</b></td>

                        </tr>

                        <tr>
                            <td style="width:70px">
                                <img src="~/img/Supplies/Electricity Repair icon-2.png" width="60" />
                            </td>
                            <td style="width:170px"><small>Electric Repairments</small> <br />  <b>@Model.InfraVal[8]</b></td>

                            <td style="width:70px">
                                <img src="~/img/Supplies/Floor Repair icon-2.png" width="60" />
                            </td>
                            <td style="width:170px"><small>Floor Repairing</small> <br /> <b>@Model.InfraVal[9]</b></td>

                        </tr>
                    </table>
                    @*<div class="chart">
                            <canvas id="bar-chart" width="800" height="450"></canvas>
                        </div>*@
                </div>
                <!-- /.box-body -->
            </div>

            <!-- /.box -->
            <!-- RADAR CHART -->
            <div class="box box-danger">
                <div class="box-header with-border">
                    <h3 class="box-title cen">School Supplies Distributed to Partners </h3>
                    <div class="box-tools pull-right">
                        @*<button type="button" class="btn btn-box-tool" data-widget="collapse">
                            <i class="fa fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>*@
                    </div>
                </div>
                <div class="box-body">

                    @*<canvas id="pieChart" style="height:250px"></canvas>*@

                    @*<canvas id="radar-chart" width="800" height="600"></canvas>*@

                    <table>
                        <tr>
                            <td style="width:70px">
                                <img src="~/img/Partners/Alight Logo.jpg" width="100" />
                            </td>
                            <td style="width:170px"><small>@Model.SupplyPartnerName[0]</small> <br /><b> @Model.SupplyPartnerVal[0]</b></td>

                            <td style="width:100px">
                                <img src="~/img/Partners/BECS logo.jpg" width="100" />
                            </td>
                            <td style="width:170px"><small>@Model.SupplyPartnerName[1]</small> <br /> <b>@Model.SupplyPartnerVal[1]</b></td>

                        </tr>

                        <tr>
                            <td style="width:70px">
                                <img src="~/img/Partners/CAR.jpg" width="100" />
                            </td>
                            <td style="width:170px"><small>@Model.SupplyPartnerName[2]</small> <br /> <b> @Model.SupplyPartnerVal[2]</b></td>

                            <td style="width:70px">
                                <img src="~/img/Partners/NCHD logo.jpg" width="100" />
                            </td>
                            <td style="width:170px"><small>@Model.SupplyPartnerName[3]</small> <br /><b> @Model.SupplyPartnerVal[3]</b></td>

                        </tr>


                    </table>


                </div>
                <!-- /.box-body -->
            </div>
            <!-- /.box -->
        </div>
        <!-- /.col (RIGHT) -->
    </div>
    <!-- /.row -->
    <!-- /.row (main row) -->
</section>
<!-- /.content -->